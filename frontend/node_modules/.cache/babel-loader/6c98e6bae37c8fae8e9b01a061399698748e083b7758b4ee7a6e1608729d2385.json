{"ast":null,"code":"import{useEffect,useState}from\"react\";import BookList from\"./book-list\";import Pagination from\"./pagination\";import HttpService from\"../services/http\";import{BookStatusType}from\"../COMMON\";import SearchBar from\"./search-bar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const httpService=new HttpService();const[books,setBooks]=useState([{\"id\":1,\"title\":\"Oedipus at Colonus\",\"author\":\"Jebb, Richard Claverhouse, Sir, 1841-1905\",\"date\":\"1930\",\"status\":\"borrowed\"},{\"id\":2,\"title\":\"The Iliad\",\"author\":\"Bryant, William Cullen, 1794-1878\",\"date\":\"c1870\",\"status\":\"free\"},{\"id\":3,\"title\":\"The Prometheus\",\"author\":\"Buckley, Theodore Alois, 1825-1856\",\"date\":\"1899\",\"status\":\"borrowed\"},{\"id\":4,\"title\":\"Parmenides\",\"author\":\"Maguire, Thomas, 1831-1889\",\"date\":\"1882\",\"status\":\"free\"},{\"id\":5,\"title\":\"Oedipus at Colonus\",\"author\":\"Jebb, Richard Claverhouse, Sir, 1841-1905\",\"date\":\"1930\",\"status\":\"free\"},{\"id\":6,\"title\":\"The Iliad\",\"author\":\"Bryant, William Cullen, 1794-1878\",\"date\":\"c1870\",\"status\":\"free\"},{\"id\":7,\"title\":\"The Prometheus\",\"author\":\"Buckley, Theodore Alois, 1825-1856\",\"date\":\"1899\",\"status\":\"free\"},{\"id\":8,\"title\":\"Parmenides\",\"author\":\"Maguire, Thomas, 1831-1889\",\"date\":\"1882\",\"status\":\"free\"},{\"id\":9,\"title\":\"Oedipus at Colonus\",\"author\":\"Jebb, Richard Claverhouse, Sir, 1841-1905\",\"date\":\"1930\",\"status\":\"free\"},{\"id\":10,\"title\":\"The Iliad\",\"author\":\"Bryant, William Cullen, 1794-1878\",\"date\":\"c1870\",\"status\":\"free\"},{\"id\":11,\"title\":\"The Prometheus\",\"author\":\"Buckley, Theodore Alois, 1825-1856\",\"date\":\"1899\",\"status\":\"free\"},{\"id\":12,\"title\":\"Parmenides\",\"author\":\"Maguire, Thomas, 1831-1889\",\"date\":\"1882\",\"status\":\"free\"},{\"id\":13,\"title\":\"Oedipus at Colonus\",\"author\":\"Jebb, Richard Claverhouse, Sir, 1841-1905\",\"date\":\"1930\",\"status\":\"free\"},{\"id\":14,\"title\":\"The Iliad\",\"author\":\"Bryant, William Cullen, 1794-1878\",\"date\":\"c1870\",\"status\":\"free\"},{\"id\":15,\"title\":\"The Prometheus\",\"author\":\"Buckley, Theodore Alois, 1825-1856\",\"date\":\"1899\",\"status\":\"free\"},{\"id\":16,\"title\":\"Parmenides\",\"author\":\"Maguire, Thomas, 1831-1889\",\"date\":\"1882\",\"status\":\"free\"},{\"id\":17,\"title\":\"Oedipus at Colonus\",\"author\":\"Jebb, Richard Claverhouse, Sir, 1841-1905\",\"date\":\"1930\",\"status\":\"free\"},{\"id\":18,\"title\":\"The Iliad\",\"author\":\"Bryant, William Cullen, 1794-1878\",\"date\":\"c1870\",\"status\":\"free\"},{\"id\":19,\"title\":\"The Prometheus\",\"author\":\"Buckley, Theodore Alois, 1825-1856\",\"date\":\"1899\",\"status\":\"free\"},{\"id\":20,\"title\":\"Parmenides\",\"author\":\"Maguire, Thomas, 1831-1889\",\"date\":\"1882\",\"status\":\"free\"}]);// This is to go solution\n// useEffect(async() => {\n//     const books = await httpService.get('books');\n//     setBooks(books);\n// }, []);\n// Pagination logic goes here\nconst[currentPage,setCurrentPage]=useState(1);const booksPerPage=5;const handlePageChange=pageNumber=>{setCurrentPage(pageNumber);};const getVisibleBooks=()=>{const startIndex=(currentPage-1)*booksPerPage;const endIndex=startIndex+booksPerPage;return books.slice(startIndex,endIndex);};// End of pagination logic\n// Update books based on search result\nconst handleSearchResults=newSearchResults=>{setBooks(newSearchResults);};// Toggling book status between Free and Borrow\nconst handleBooking=async(bookId,bookStatus)=>{const url=\"/book/\".concat(bookId,\"/\").concat(bookStatus===BookStatusType.BORROW?'borrowBook':'releaseBook');const requestBody={userId:1};// This should get updated to fetch the current user Id\nconst borrowResponse=await httpService.put(url,requestBody);if(borrowResponse.status===200){setBooks(books=>books.map(book=>book.id===bookId?{...book,status:bookStatus}:book));}};const visibleBooks=getVisibleBooks();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SearchBar,{onSearch:handleSearchResults}),/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(BookList,{books:visibleBooks,title:\"Books\",handleBooking:handleBooking}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:Math.ceil(books.length/booksPerPage),handlePageChange:handlePageChange})]})]});};export default Home;","map":{"version":3,"names":["useEffect","useState","BookList","Pagination","HttpService","BookStatusType","SearchBar","jsx","_jsx","jsxs","_jsxs","Home","httpService","books","setBooks","currentPage","setCurrentPage","booksPerPage","handlePageChange","pageNumber","getVisibleBooks","startIndex","endIndex","slice","handleSearchResults","newSearchResults","handleBooking","bookId","bookStatus","url","concat","BORROW","requestBody","userId","borrowResponse","put","status","map","book","id","visibleBooks","children","onSearch","className","title","totalPages","Math","ceil","length"],"sources":["/var/www/project/src/components/home.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport BookList from \"./book-list\";\nimport Pagination from \"./pagination\";\nimport HttpService from \"../services/http\";\nimport { BookStatusType } from \"../COMMON\";\nimport SearchBar from \"./search-bar\";\n\n\nconst Home = () => {\n    const httpService = new HttpService();\n    const [books, setBooks] = useState([\n        {\n            \"id\": 1,\n            \"title\": \"Oedipus at Colonus\",\n            \"author\": \"Jebb, Richard Claverhouse, Sir, 1841-1905\",\n            \"date\": \"1930\",\n            \"status\": \"borrowed\"\n        },\n        {\n            \"id\": 2,\n            \"title\": \"The Iliad\",\n            \"author\": \"Bryant, William Cullen, 1794-1878\",\n            \"date\": \"c1870\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 3,\n            \"title\": \"The Prometheus\",\n            \"author\": \"Buckley, Theodore Alois, 1825-1856\",\n            \"date\": \"1899\",\n            \"status\": \"borrowed\"\n        },\n        {\n            \"id\": 4,\n            \"title\": \"Parmenides\",\n            \"author\": \"Maguire, Thomas, 1831-1889\",\n            \"date\": \"1882\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 5,\n            \"title\": \"Oedipus at Colonus\",\n            \"author\": \"Jebb, Richard Claverhouse, Sir, 1841-1905\",\n            \"date\": \"1930\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 6,\n            \"title\": \"The Iliad\",\n            \"author\": \"Bryant, William Cullen, 1794-1878\",\n            \"date\": \"c1870\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 7,\n            \"title\": \"The Prometheus\",\n            \"author\": \"Buckley, Theodore Alois, 1825-1856\",\n            \"date\": \"1899\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 8,\n            \"title\": \"Parmenides\",\n            \"author\": \"Maguire, Thomas, 1831-1889\",\n            \"date\": \"1882\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 9,\n            \"title\": \"Oedipus at Colonus\",\n            \"author\": \"Jebb, Richard Claverhouse, Sir, 1841-1905\",\n            \"date\": \"1930\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 10,\n            \"title\": \"The Iliad\",\n            \"author\": \"Bryant, William Cullen, 1794-1878\",\n            \"date\": \"c1870\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 11,\n            \"title\": \"The Prometheus\",\n            \"author\": \"Buckley, Theodore Alois, 1825-1856\",\n            \"date\": \"1899\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 12,\n            \"title\": \"Parmenides\",\n            \"author\": \"Maguire, Thomas, 1831-1889\",\n            \"date\": \"1882\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 13,\n            \"title\": \"Oedipus at Colonus\",\n            \"author\": \"Jebb, Richard Claverhouse, Sir, 1841-1905\",\n            \"date\": \"1930\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 14,\n            \"title\": \"The Iliad\",\n            \"author\": \"Bryant, William Cullen, 1794-1878\",\n            \"date\": \"c1870\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 15,\n            \"title\": \"The Prometheus\",\n            \"author\": \"Buckley, Theodore Alois, 1825-1856\",\n            \"date\": \"1899\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 16,\n            \"title\": \"Parmenides\",\n            \"author\": \"Maguire, Thomas, 1831-1889\",\n            \"date\": \"1882\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 17,\n            \"title\": \"Oedipus at Colonus\",\n            \"author\": \"Jebb, Richard Claverhouse, Sir, 1841-1905\",\n            \"date\": \"1930\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 18,\n            \"title\": \"The Iliad\",\n            \"author\": \"Bryant, William Cullen, 1794-1878\",\n            \"date\": \"c1870\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 19,\n            \"title\": \"The Prometheus\",\n            \"author\": \"Buckley, Theodore Alois, 1825-1856\",\n            \"date\": \"1899\",\n            \"status\": \"free\"\n        },\n        {\n            \"id\": 20,\n            \"title\": \"Parmenides\",\n            \"author\": \"Maguire, Thomas, 1831-1889\",\n            \"date\": \"1882\",\n            \"status\": \"free\"\n        },\n    ]);\n\n    // This is to go solution\n    // useEffect(async() => {\n    //     const books = await httpService.get('books');\n    //     setBooks(books);\n    // }, []);\n\n    // Pagination logic goes here\n    const [currentPage, setCurrentPage] = useState(1);\n    const booksPerPage = 5;\n  \n    const handlePageChange = (pageNumber) => {\n      setCurrentPage(pageNumber);\n    };\n  \n    const getVisibleBooks = () => {\n      const startIndex = (currentPage - 1) * booksPerPage;\n      const endIndex = startIndex + booksPerPage;\n      return books.slice(startIndex, endIndex);\n    };\n    // End of pagination logic\n\n    // Update books based on search result\n    const handleSearchResults = (newSearchResults) => {\n        setBooks(newSearchResults);\n    };\n\n    // Toggling book status between Free and Borrow\n    const handleBooking = async(bookId, bookStatus) => {\n        const url = `/book/${bookId}/${bookStatus === BookStatusType.BORROW ? 'borrowBook' : 'releaseBook'}`;\n        const requestBody = { userId: 1 }; // This should get updated to fetch the current user Id\n\n        const borrowResponse = await httpService.put(url, requestBody);\n        if (borrowResponse.status === 200) {\n            setBooks(books =>\n                books.map(book =>\n                  book.id === bookId ? { ...book, status: bookStatus } : book\n                )\n              );\n        }\n    };\n  \n    const visibleBooks = getVisibleBooks();\n\n\n    return ( \n        <div>\n            <SearchBar onSearch={ handleSearchResults }/>\n            <div className=\"home\">\n                <BookList books={ visibleBooks } title='Books' handleBooking={ handleBooking }/>\n                <Pagination\n                    currentPage={currentPage}\n                    totalPages={Math.ceil(books.length / booksPerPage)}\n                    handlePageChange={ handlePageChange }\n                />\n            </div>\n        </div>\n     );\n}\n \nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}